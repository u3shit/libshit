# -*- mode: python -*-

def options(ctx):
    ctx.system_opt('brigand')
    ctx.system_opt('catch')

    ctx.recurse('.', name='options', wscript='wscript_boost', once=False)
    ctx.recurse('.', name='options', wscript='wscript_lua', once=False)

def configure(ctx):
    def system_catch(ctx):
        ctx.check_cxx(header_name='catch.hpp', uselib_store='CATCH')
        ctx.undefine('HAVE_CATCH_HPP') # why must u define it
    def system_brigand(ctx):
        ctx.check_cfg(package='libbrigand', args='--cflags',
                      global_define=True, uselib_store='BRIGAND')
        ctx.undefine('HAVE_LIBBRIGAND') # ...
    ctx.system_chk('catch', 'auto', system_catch, 'catch/include')
    ctx.system_chk('brigand', 'auto', system_brigand, 'brigand/include')

    ctx.recurse('.', name='configure', wscript='wscript_boost', once=False)
    ctx.recurse('.', name='configure', wscript='wscript_lua', once=False)

def build(ctx):
    ctx.recurse('.', name='build', wscript='wscript_boost', once=False)
    ctx.recurse('.', name='build', wscript='wscript_lua', once=False)
